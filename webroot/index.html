<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Basics - Learning ScrollTrigger</title>
    <style>
      * {
        box-sizing: border-box;
        font-family: sans-serif;
      }

      body {
        padding: 0px;
        margin: 0px;
      }
    </style>

    <!--
      /umd/ - uncompressed versions of the minified files, in UMD format (highly compatible). Typically these are used for older build tools or for debugging (because the source code is human-readable)
      Now GSAP has only one library, no more TweenMax or TweenLight
    -->
    <script src="js/3.12.2_gsap/umd/gsap.js"></script>

    <script src="js/3.12.2_gsap/umd/ScrollTrigger.js"></script>
    <script>
      // To use ScrollTrigger we have to register it with gsap first
      gsap.registerPlugin(ScrollTrigger);
    </script>

    <script src="js/3.12.2_gsap/umd/TextPlugin.js"></script>
    <script>
      // To use TextPlugin we have to register it with gsap first
      gsap.registerPlugin(TextPlugin);
    </script>

  </head>
  <body>

    <style>
      .instructions {
        height: 500px;
        overflow: auto;
      }

      .instructions div {
        padding: 50px;
        margin: 0 auto;
        max-width: 800px;
        margin-top: 100px;
      }
    </style>

    <div class="instructions box-shadow">
      <div>
        Menu:
        <a href="/scrollmagic-basic.html">ScrollMagic</a>
        <br><br>
        <h3>ScrollTrigger Learning</h3>
        <p>Instructions and tips for ScrollTrigger</p>
        <p>Best documentation to follow is: <a href="https://greensock.com/docs/v3/Plugins/ScrollTrigger" target="_blank">https://greensock.com/docs/v3/Plugins/ScrollTrigger</a></p>
      </div>
    </div>

    <!----------------------------------->
    <!-- Basic animations, auto played, played on scroll once, attached to scroll without and with delay  -->
    <!----------------------------------->

    <style>
      .happy {
        display: flex;
        height: 900px;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        overflow: hidden; /* No horizontal bar on mobile fix */

        background-color: #e3fafa;
      }

      .happy-happy,
      .happy-glad,
      .happy-sunshine,
      .happy-bag {
        padding: 40px;
        margin-top: 50px;
        margin-bottom: 50px;
        border-radius: 5px;
        color: white;
      }

      .happy-happy {
        background-color: #23aa93;
      }

      .happy-glad {
        background-color: #537aa3;
      }

      .happy-sunshine {
        background-color: #ccb100;
      }

      .happy-bag {
        background-color: #aaa;
      }

    </style>

    <div class="happy">
      <div class="happy-happy">I'm happy!</div>

      <div class="happy-glad">I'm feeling glad!</div>

      <div class="happy-sunshine">I've got sunshine!</div>

      <div class="happy-bag">In a bag!<br>(with scrub)</div>
    </div>

    <script>
      gsap.set('.happy-happy', {x: -400}); /* First we set the starting conditions */
      gsap.to('.happy-happy', {
        x: 0, /* Move happy square to right */
        rotation: 360, /* While rotating */
        duration: 3 /* In total 3 seconds */
      });
    </script>

    <script>
      gsap.set('.happy-glad', {x: -400}); /* Starting conditions, progressive enhancement */
      gsap.to('.happy-glad', {
        x: 0, /* Move happy square to right */
        rotation: 360, /* While rotating */
        duration: 3,
        scrollTrigger: {
          trigger: ".happy-glad", /* The element (or selector text for the element) whose position in the normal document flow is used to calculate where the ScrollTrigger starts. */
          start: 'top center', /* When top of the trigger, hits center of the screen */
          // markers: true, /* Show debug markers */
          // id: "glad" /* Unique id, also added to name of debug markers */
        }
      });
    </script>

    <script>
      gsap.set('.happy-sunshine', {x: -400}); /* Starting conditions, progressive enhancement */
      gsap.to('.happy-sunshine', {
        x: 0, /* Move happy square to right */
        rotation: 360, /* While rotating */
        scrollTrigger: {
          trigger: ".happy-sunshine", /* The element (or selector text for the element) whose position in the normal document flow is used to calculate where the ScrollTrigger starts. */
          start: "top center", /* When top of the trigger, hits center of the screen */
          end: "top 300px", /* When top of the trigger, hits 300px down from the top of the scroller */
          scrub: true, /* Links the animation's progress directly to the ScrollTrigger's progress. */
          // markers: true, /* Show debug markers */
          // id: "sunshine" /* Unique id, also added to name of debug markers */
        }
      });
    </script>

    <script>
      gsap.set('.happy-bag', {x: -400}); /* Starting conditions, progressive enhancement */
      gsap.to('.happy-bag', {
        x: 0, /* Move happy square to right */
        rotation: 360, /* While rotating */
        scrollTrigger: {
          trigger: ".happy-bag", /* The element (or selector text for the element) whose position in the normal document flow is used to calculate where the ScrollTrigger starts. */
          start: "top center", /* When top of the trigger, hits center of the screen */
          end: "top 300px", /* When top of the trigger, hits 300px down from the top of the scroller */
          scrub: 1, /* Links to scrollbar, with delay of 1 sec, to smooth things out */
          // markers: true, /* Show debug markers */
          // id: "bag" /* Unique id, also added to name of debug markers */
        }
      });
    </script>

    <div style="height: 300px;"></div>
    <div style="height: 300px; background-color: #666;"></div>
    <div style="height: 300px;"></div>

    <!----------------------------------->
    <!-- Animation with timeline attached to scroll -->
    <!----------------------------------->

    <style>
      .useless {
        display: flex;
        height: 900px;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        overflow: hidden; /* No horizontal bar on mobile fix */

        background-color: #fafad3;
      }

      .useless-box {
        padding: 40px;
        margin-top: 50px;
        margin-bottom: 50px;
        border-radius: 5px;
        color: white;
        background-color: rgba(252, 187, 89, 1);
        background-image: linear-gradient(90deg, rgba(252, 187, 89, 1) 0%, rgba(41, 53, 86, 0.65) 100%);
      }

    </style>

    <div class="useless">
      <div class="useless-box">I'm useless!</div>
    </div>

    <script>
      gsap.set('.useless-box', {x: -400}); /* Starting conditions, progressive enhancement */

      var timeline = gsap.timeline({
        scrollTrigger: {
          trigger: '.useless', // The element (or selector text for the element) whose position in the normal document flow is used to calculate where the ScrollTrigger starts.
          start: 'top center', // When top of the trigger, hits center of the screen
          end: 'bottom center', // When bottom of the trigger (container), hits center of the screen
          scrub: 1, // Links to scrollbar, with delay of 1 sec, to smooth things out
          // markers: true, // Show debug markers
          // id: "useless" // Unique id, also added to name of debug markers
        }
      });
      timeline.to('.useless-box', {x: 0, rotation: 360, duration: 3}); // It calculates duration of animation based on durations here, so first .to() takes more time
      timeline.to('.useless-box', {y: -300, duration: 1});
      timeline.to('.useless-box', {opacity: 0, duration: 0.5});
      timeline.to('.useless-box', {opacity: 1, duration: 0.5});
      timeline.to('.useless-box', {text: 'But not for long...', duration: 1}); /* Uses TextPlugin */
      timeline.to('.useless-box', {y: 0, duration: 1});
      timeline.to('.useless-box', {rotation: 360, duration: 1});
    </script>

    <div style="height: 300px;"></div>
    <div style="height: 300px; background-color: #666;"></div>
    <div style="height: 300px;"></div>

    <!----------------------------------->
    <!-- Basic Pin -->
    <!----------------------------------->
    <style>
      .stay-a-while-section {
        background: rgb(2,0,36);
        background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 0%, rgba(0,212,255,1) 100%);
        height: 500px;
      }

      .stay-a-while-div {
        background-color: #aa9;
      }

      .stay-a-while-span {
        background-color: #aaaae8;
      }

      .stay-a-while-box {
        background-color: #eeaae8;
        width: 100%;
        margin: 0 auto;
        max-width: 200px;
      }
    </style>

    <div id="stay-a-while-trigger"></div> <!-- Trigger can be seperate div -->

    <div class="stay-a-while-section"> <!-- This wrapper will grow with ScrollMagic pin height adjusting auto-element -->
      <div class="stay-a-while-pin"> <!-- Everything inside this container will be pinned (position: fixed;)-->
        <div class="stay-a-while-div">Stay a WHILE please :)</div>
        <span class="stay-a-while-span">Just a little while...</span>
        <div class="stay-a-while-box">This box will stay a while</div>
      </div>
    </div>

    <script>
      ScrollTrigger.create({
        trigger: ".stay-a-while-section", // The element (or selector text for the element) whose position in the normal document flow is used to calculate where the ScrollTrigger starts.
        start: "top center", // When top of the trigger, hits center of the screen
        end: "bottom center+=57px", // When bottom of the trigger (container), hits 57 px below center of the screen
        pin: ".stay-a-while-pin", // Always pin container of elements
        // markers: true, // Show debug markers
        // id: "stay-a-while" // Unique id, also added to name of debug markers
      });
    </script>

    <div style="height: 300px;"></div>
    <div style="height: 300px; background-color: #666;"></div>
    <div style="height: 300px;"></div>

    <!----------------------------------->
    <!-- Pin with overlapping  -->
    <!----------------------------------->
    <style>
      .lobscouse-wrapper { /* We use wrapper to define background behind lobscouse-box */
        background: rgb(2,0,36);
        background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(207,189,119,1) 0%, rgba(0,212,255,1) 100%);
      }

      .lobscouse-box {
        background-color: #000;
        color: #fff;
        margin: 0 auto;
        max-width: 300px;
        font-size: 24px;
        text-align: center;
      }

      .lobscouse-another-section {
        height: 600px;
        text-align: center;
        padding-top: 40px;
        background-color: #ddd;
      }
    </style>

    <div class="lobscouse-wrapper">
      <div class="lobscouse-pin"> <!-- Everything inside this container will be pinned (position: fixed;) -->
        <div class="lobscouse-box">Lapskaus is a good meal</div>
        <div class="lobscouse-box">I love it!</div>
      </div>
    </div>

    <div class="lobscouse-another-section">
      This is another section, that will be overlapped by lobscouse
    </div>

    <script>
      var pinnedElementHeight = document.querySelector('.lobscouse-pin').offsetHeight; // We calculate height of .lobscouse-pin so that it will stop correctly at the end:

      ScrollTrigger.create({
        trigger: ".lobscouse-wrapper", // The element (or selector text for the element) whose position in the normal document flow is used to calculate where the ScrollTrigger starts.
        start: "top center", // When top of the trigger, hits center of the screen
        endTrigger: ".lobscouse-another-section",
        end: "bottom center+=" + pinnedElementHeight + "px", // When bottom of the endTrigger (container), hits pinnedElementHeight px below the center of the screen
        pin: ".lobscouse-pin", // Always pin container of elements
        pinSpacing: false, // Setting to false makes next sections scroll under the pined element. Something like pushFollowers in ScrollMagic
        markers: true, // Show debug markers
        id: "lobscouse" // Unique id, also added to name of debug markers
      });
    </script>

    <div style="height: 300px;"></div>
    <div style="height: 300px; background-color: #666;"></div>
    <div style="height: 300px;"></div>

    <!-- WATCH: https://www.youtube.com/watch?v=X7IBa7vZjmo -->

    <!----------------------------------->
    <!-- Pin with animations -->
    <!----------------------------------->
    <!-- https://codepen.io/GreenSock/pen/zYrELYe -->

    <!----------------------------------->
    <!-- Fillers -->
    <!----------------------------------->
    <div style="height: 1200px; background-color: #666;"></div>
    <div style="height: 1200px;"></div>
    <div style="height: 1200px;" class="background-grey"></div>
    <div style="height: 1200px;"></div>
    <div style="height: 1200px;" class="background-grey"></div>

  </body>
</html>
